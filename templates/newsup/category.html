<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Basic Page Needs
    ================================================== -->
  <meta charset="utf-8">
  <!--[if IE]><meta http-equiv="x-ua-compatible" content="IE=9" /><![endif]-->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NewsUp - News, Magazine and Article Directory Theme</title>
  <meta name="description" content="NewsUp is a multi-page oriented template perfect for NewsUp - News, Magazine, Blogging and Article Directory.">
  <meta name="keywords" content="news theme, magazine, blog, article directory, article submission, writer, author, publication, html, bootstrap">
  <meta name="author" content="Sempy Themes">

  <!-- Favicons
      ================================================== -->
  <link rel="shortcut icon" href="/static/newsup/img/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="/static/newsup/img/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/static/newsup/img/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/static/newsup/img/apple-touch-icon-114x114.png">

  <!-- Bootstrap
      ================================================== -->
  <link href="{{ static_url('newsup/css/bootstrap.css') }}" rel="stylesheet" type="text/css" />
  <link href="{{ static_url('newsup/css/bootstrap-tagsinput.css') }}" rel="stylesheet" type="text/css" />
  <link href="{{ static_url('newsup/css/jasny-bootstrap.min.css') }}" rel="stylesheet" type="text/css" />
  <link href="{{ static_url('css/font-awesome.min.css') }}" rel="stylesheet" type="text/css" />

  <!-- Animate
      ================================================== -->
  <link href="{{ static_url('newsup/css/effect2.css') }}" rel='stylesheet' type='text/css' />
  <link href="{{ static_url('newsup/css/animate.css') }}" rel='stylesheet' type='text/css' />

  <!-- Add fancyBox CSS files -->
  <link href="{{ static_url('newsup/js/fancybox/jquery.fancybox.css') }}" media="screen" rel="stylesheet" type="text/css" />

  <!-- Owl Slider CSS -->
  <link href="{{ static_url('newsup/css/owl.carousel.css') }}" media="screen" rel="stylesheet" type="text/css" />
  <link href="{{ static_url('newsup/css/owl.theme.css') }}" media="screen" rel="stylesheet" type="text/css" />
  <link href="{{ static_url('newsup/css/owl.transitions.css') }}" media="screen" rel="stylesheet" type="text/css" />

  <!-- Custom Css
      ================================================== -->
  <link href="{{ static_url('newsup/css/rs-wp-v1.2.css') }}" rel="stylesheet" type="text/css" />
  <link href="{{ static_url('newsup/css/jquery.rs.selectbox.css') }}" rel="stylesheet" type="text/css" />
  <link href="{{ static_url('css/style.css') }}" rel="stylesheet" type="text/css" />
  <link href="{{ static_url('newsup/css/responsive.css') }}" rel="stylesheet" type="text/css" />

  <!-- Custom Fonts
      ================================================== -->
  <link href="{{ static_url('newsup/fonts/stylesheet.css') }}" rel="stylesheet" type="text/css" />

  <!-- Google Fonts
      ================================================== -->
  <link href='http://fonts.googleapis.com/css?family=Lato:400,100,100italic,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>


  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script type="text/javascript" src="{{ static_url('newsup/js/jquery.1.11.1.js') }}"></script>

</head>

<body>

  <!--- Wrapper -->
  <section id="wrapper" class="clearfix">

    <!--- Header -->
    <header>

      <!-- socialbar -->
      {% module Template("newsup/block-socialbar.html", is_login=is_login) %}
      <!-- /socialbar -->

      <!-- menubar -->
      {% module Template("newsup/block-menubar.html") %}
      <!-- /menubar -->

    </header>
    <!--- End Header -->

    <!-- Page Breadcrumb -->
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <div class="rst-breadcrumb">
            <a href="/portal/newsup/index"><span>Home</span></a>
            <span>></span>
            <a href="#"><span>Sport</span></a>
          </div>
        </div>
      </div>
    </div>
    <!-- End Page Breadcrumb -->


    <!-- Category Banner -->
    <section id="rst-catbanner">
      <div class="container">
        <div class="row">
          <div class="col-xs-12">
            {% for i in range(len(sceneries)) %}
            {% if i == 0 %}
            <div class="rst-catbanner-post">
              <div class="rst-mainslide">
                <div class="rst-boxinfo">
                  <a href="#"><span>
                    {% for category in sceneries[i]['categories'] %}
                      {{ category['title'] }}&nbsp;
                    {% end %}
                  </span></a>
                  <p><a href="/portal/newsup/item-detail?id={{ sceneries[i]['_id'] }}">{{ sceneries[i]['title'] }}</a></p>
                  <time><i class="fa fa-clock-o"></i>{{ sceneries[i]['publish_time'] }}</time>
                </div>
                <img src="{{ sceneries[i]['img'] }}!800x370" alt="" />
              </div>
            </div>
            {% end %}
            {% end %}
            <div class="rst-catbanner-slider owl-carousel rst-postpic">
              {% for multimedia in multimedias %}
              <img src="{{ multimedia['url'] }}!370x370" alt="" />
              {% end %}
            </div>
            <div class="clear"></div>
          </div>
        </div>
      </div>
    </section>
    <!-- End Category Banner -->

    <!-- Category Page Content -->
    <section id="rst-catcontent">
      <div class="container">
        <div class="row">
          <div class="col-sm-8">
            <div class="rst-section-title rst-section-title-box">
              <h4>All</h4>
              <div class="rst-shortmenu">
                <form action="#">
                  <select name="rst-catshortselect" id="rst-catshortselect">
										<option value="Popular">All</option>
										<option value="Price">Football</option>
										<option value="View">Boxing</option>
									</select>
                </form>
                <div class="rst-viewstyle">
                  <a href="#" class="rst-view-gird"></a>
                  <a href="#" class="rst-view-list active"></a>
                </div>
              </div>
            </div>
            <div class="row rst-cat-postlist" id="articleBox">

            </div>
            <div class="row" id="page-bar">
              <div class="col-xs-12">
                <nav class="wp-pagenavi" id="pagenavi">
                  <a class="page-prev" id="prev">Prev</a>

                  <!-- <a class="page-numbers current" href="#">1</a>
                  <a class="page-numbers" href="#">2</a>
                  <a class="page-numbers" href="#">3</a>
                  <a class="page-numbers" href="#">4</a>
                  <a class="page-numbers" href="#">5</a> -->
                  <a class="page-next" id="next">Next</a>
                </nav>
                <div class="clear"></div>
              </div>
            </div>
          </div>
          <div class="col-sm-4">
            <!-- begin widget social -->
            {% module Template("newsup/block-widget-social.html") %}
            <!-- end widget social -->

            <!-- begin widget popular -->
            {% module Template("newsup/block-widget-popular.html", populars=populars, news=news) %}
            <!-- end widget popular -->

            <!-- begin widget adv -->
            {% module Template("newsup/block-widget-adv.html", activities=activities) %}
            <!-- end widget adv -->

            <!-- begin widget video -->
            {% module Template("newsup/block-widget-video.html") %}
            <!-- end widget video -->

            {% module Template("newsup/block-widget-contactus.html") %}


          </div>
          <!-- End Content Sidebar -->
        </div>
      </div>
    </section>
    <!-- End Category Page Content -->

    <!-- Section Latest Comments -->
    {% module Template("newsup/block-lastest-comments.html", lastest_comments=lastest_comments) %}
    <!-- End Section Latest Comments -->

    <!-- Footer -->
    {% module Template("newsup/block-footer.html") %}
    <!-- End Footer -->

  </section>
  <!--- End Wrapper -->

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script type="text/javascript" src="{{ static_url('newsup/js/jquery.1.11.1.js') }}"></script>

  <!-- Bootstrap Js Compiled Plugins -->
  <script type="text/javascript" src="{{ static_url('newsup/js/bootstrap.min.js') }}"></script>
  <script type="text/javascript" src="{{ static_url('newsup/js/bootstrap-tagsinput.js') }}"></script>
  <script type="text/javascript" src="{{ static_url('newsup/js/jqBootstrapValidation.js') }}"></script>

  <!-- WoW Js -->
  <script type="text/javascript" src="{{ static_url('newsup/js/wow.min.js') }}"></script>

  <!-- Add Fancybox -->
  <script type="text/javascript" src="{{ static_url('newsup/js/fancybox/jquery.fancybox.js') }}"></script>
  <script type="text/javascript" src="{{ static_url('newsup/js/fancybox/helpers/jquery.fancybox-media.js') }}"></script>

  <!-- Owl Slider Js -->
  <script type="text/javascript" src="{{ static_url('newsup/js/owl.carousel.js') }}"></script>
  <script src="{{ static_url('js/vue-2.1.4.js') }}" type="text/javascript"></script>

  <!-- Weather Js -->
  <!--
  <script type="text/javascript" src="{{ static_url('newsup/js/jquery.simpleWeather.js') }}"></script>
  -->

  <!-- Custome Selectbox Js -->
  <script type="text/javascript" src="{{ static_url('newsup/js/jquery.rs.selectbox.js') }}"></script>

  <script type="text/javascript" src="{{ static_url('js/main.js') }}"></script>

</body>
<script>
        var preAllow = true;   // when ajax not completed, cannot do the next request
        var limit = 2;//每页显示数
        var currentPage;//当前页
        var total_page;//总页数
        function query(currentPage) {
          $.get("/api/articles-pagination?filter=league&league_id={{ league_id }}&status=publish&category={{ category_id }}&page="+currentPage+"&limit="+limit+"",function(data,status){
                console.log(data);
            var pageData = data.data;
            var total_page = data.total_pgae;//总页数

            // num = ajaxobj.length;
            for (var i in pageData) {
              var inner_html = '<article class="col-sm-12 rst-catpost">';
              inner_html += '<div class="rst-postpic">';
              inner_html += '<a href="/portal/newsup/item-detail?id='+ pageData[i]._id + '"><img src="'+ pageData[i].img +'!370x370" alt="" /></a>';
              inner_html += '<a class="rst-postpic-cat" href="#"><span>fitness</span></a>';
              inner_html += '</div>';
              inner_html += '<div class="rst-postinfo">';
              inner_html += '<a class="rst-postpic-cat" href="#"><span>';
                for (var j in pageData[i].categories){
                  inner_html += pageData[i].categories[j].title + '&nbsp;';
                }
              inner_html += '</span></a>';
              inner_html += '<h6><a href="/portal/newsup/item-detail?id='+ pageData[i]._id +'">'+ pageData[i].title +'</a></h6>'
              inner_html += '<time><i class="fa fa-clock-o"></i>'+ getLocalTime(pageData[i].publish_time) +'</time>';
              inner_html += '<p>'+ pageData[i].subtitle +'</p>';
              inner_html += '</div>';
              inner_html += '<div class="clear"></div>';
              inner_html += '</article>';

              $('#articleBox').append(inner_html);
              // member_num += 1;
            };
            for (var k=1;k<=total_page;k++){
              var inner_html = '<a class="page-numbers" id="num'+k+'" onclick="query('+k+')">'+ k +'</a>';
              $("#pagenavi").append(inner_html);
            };
            preAllow = true;
          });
        }
        query(1);

        function gotoPage(currentPage) {
          $.get("/api/articles-pagination?filter=league&league_id={{ league_id }}&status=publish&category={{ category_id }}&page="+currentPage+"&limit="+limit+"",function(data,status){
                console.log(data);
            var pageData = data.data;
            var total_page = data.total_pgae;//总页
            $('#articleBox').empty();
            for (var i in pageData) {
              var inner_html = '<article class="col-sm-12 rst-catpost">';
              inner_html += '<div class="rst-postpic">';
              inner_html += '<a href="/portal/newsup/item-detail?id='+ pageData[i]._id + '"><img src="'+ pageData[i].img +'!370x370" alt="" /></a>';
              inner_html += '<a class="rst-postpic-cat" href="#"><span>fitness</span></a>';
              inner_html += '</div>';
              inner_html += '<div class="rst-postinfo">';
              inner_html += '<a class="rst-postpic-cat" href="#"><span>';
                for (var j in pageData[i].categories){
                  inner_html += pageData[i].categories[j].title + '&nbsp;';
                }
              inner_html += '</span></a>';
              inner_html += '<h6><a href="/portal/newsup/item-detail?id='+ pageData[i]._id +'">'+ pageData[i].title +'</a></h6>'
              inner_html += '<time><i class="fa fa-clock-o"></i>'+ getLocalTime(pageData[i].publish_time) +'</time>';
              inner_html += '<p>'+ pageData[i].subtitle +'</p>';
              inner_html += '</div>';
              inner_html += '<div class="clear"></div>';
              inner_html += '</article>';

              $('#articleBox').append(inner_html);
              // member_num += 1;
            };
            preAllow = true;
          });

        };
        // $("#next").click(function(){ // This event fires when a button is clicked
        //   if(preAllow){
        //       preAllow = false;
        //       query();
        //       if(num<limit){
        //         $.alert("没有更多了！");
        //       }
        //   }
        // });

      function getLocalTime(nS) { //时间戳转换
         return new Date(parseInt(nS) * 1000).toLocaleString().replace(/:\d{1,2}$/,' ');
      }
</script>

</html>
